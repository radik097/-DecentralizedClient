# SecureChat: Децентрализованное зашифрованное приложение для обмена сообщениями

## Описание проекта

**SecureChat** — это децентрализованное приложение для обмена зашифрованными сообщениями, построенное на Python. Оно использует веб-сокеты (WebSocket) для связи между клиентами и самоподписанные сертификаты для обеспечения безопасного соединения. Приложение поддерживает как графический интерфейс на основе Flet, так и работу в консольном режиме (CLI), что делает его гибким для использования в разных операционных системах и средах.

## Основные возможности

- **Децентрализованная архитектура**: каждый клиент может выступать как сервер, принимая входящие соединения, так и клиентом, инициирующим соединения с другими нодами.
- **Безопасное шифрование**: используется самоподписанный сертификат и SSL для защиты передаваемых данных.
- **Синхронизация базы данных**: клиенты могут синхронизировать свои базы данных с ключами других клиентов для упрощения работы с ключами шифрования.
- **Графический интерфейс**: поддержка GUI через Flet, а также возможность запуска в консольном режиме.
- **Расширяемость**: код структурирован и разделен на модули, что упрощает добавление новых функций и поддержку проекта.

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-username/SecureChat.git
   cd SecureChat
   ```

2. Создайте виртуальное окружение и активируйте его:
   ```bash
   python -m venv venv
   source venv/bin/activate   # Linux/MacOS
   venv\Scripts\activate      # Windows
   ```

3. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

## Запуск приложения

### Графический интерфейс (GUI)
Для запуска в режиме GUI:
```bash
python main.py
```
Приложение автоматически определит вашу операционную систему. Если система Windows, будет запущен графический интерфейс на основе Flet. Если приложение запущено на Linux или MacOS, оно перейдет в консольный режим.

### Консольный интерфейс (CLI)
Для запуска в режиме CLI:
```bash
python main.py
```
Приложение автоматически запустится в консольном режиме на системах Linux или MacOS.

## Как работает приложение

### Основной процесс

1. **Генерация уникального ID клиента**:
   - При каждом запуске приложения генерируется уникальный `client_id`, который используется для идентификации клиента в сети.

2. **Подключение к известным нодам**:
   - Приложение пытается подключиться к заранее известным нодам, указанным в списке `known_peers`. Если подключение удается, клиенты обмениваются ключами и синхронизируют базы данных.

3. **Запуск в режиме сервера**:
   - Если клиент не смог подключиться ни к одной из нод, он запускается в режиме сервера и ожидает входящих соединений.

4. **Синхронизация базы данных**:
   - После успешного обмена ключами, клиенты синхронизируют свои базы данных с ключами друг друга. Это упрощает обмен сообщениями, так как все клиенты будут иметь актуальные ключи.

5. **Чат**:
   - Клиенты могут обмениваться сообщениями. В режиме GUI используются элементы управления для ввода и отправки сообщений, в CLI — консольные команды.

### Возможности для расширения

- **Расширение шифрования**: можно добавить поддержку дополнительных алгоритмов шифрования или интеграцию с внешними сервисами для проверки сертификатов.
- **Мульти-канальное общение**: можно реализовать возможность общения между несколькими клиентами в одном чате, расширив архитектуру WebSocket.
- **Уведомления**: добавление системы уведомлений о новых сообщениях как в GUI, так и в CLI.
- **Поддержка мобильных клиентов**: использование Flet для создания мобильных приложений на базе существующей архитектуры.

## Структура проекта

```
SecureChat/
│
├── main.py                    # Главный файл запуска программы
├── database.py                # Модуль для работы с базой данных
├── client.py                  # Модуль с логикой работы клиента и WebSocket
├── security.py                # Модуль для генерации сертификатов и работы с безопасностью
├── requirements.txt           # Файл с зависимостями проекта
└── README.md                  # Описание проекта (данный файл)
```

## Требования

- Python 3.7 или выше
- Пакеты, указанные в `requirements.txt`

## Поддержка и развитие

Если у вас есть предложения по улучшению или вы нашли ошибку, не стесняйтесь создавать [issue](https://github.com/your-username/SecureChat/issues) или отправлять [pull request](https://github.com/your-username/SecureChat/pulls).
  
## Лицензия

Этот проект распространяется под лицензией MIT. Подробности смотрите в файле LICENSE.

---

Это руководство должно помочь вам понять, как работает SecureChat, и как можно развивать и расширять его функциональность.